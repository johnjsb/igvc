<launch>

  <node pkg="usb_cam" type="usb_cam_node" name="left_camera" ns="stereo" output="screen">
    <param name="video_device" value="/dev/video2"/>
    <param name="image_width" value="1280"/>
    <param name="image_height" value="720"/>
    <param name="camera_frame_id" value="/left_camera_link"/>
    <param name="framerate" value="30"/>
    <param name="camera_name" value="left_camera"/>
    <param name="camera_info_url" type="string" value="file://$(find vision)/calibrations/left_stereo.yml" />
  </node>

  <node pkg="usb_cam" type="usb_cam_node" name="right_camera" ns="stereo" output="screen">
    <param name="video_device" value="/dev/video1"/>
    <param name="image_width" value="1280"/>
    <param name="image_height" value="720"/>
    <param name="camera_frame_id" value="/left_camera_link"/>
    <param name="framerate" value="30"/>
    <param name="camera_name" value="right_camera"/>
    <param name="camera_info_url" type="string" value="file://$(find vision)/calibrations/right_stereo.yml" />
  </node>

  <!--<node pkg="image_view" type="image_view" name="left_viewer" output="screen">
    <remap from="/image" to="/stereo/left_camera/image_raw"/>
  </node>

  <node pkg="image_view" type="image_view" name="right_viewer" output="screen">
    <remap from="/image" to="/stereo/right_camera/image_raw"/>
  </node> -->

  <param name="robot_description" textfile="$(find igvc_sim)/models/hal/model.urdf"/>

  <node pkg="robot_state_publisher" type="state_publisher" name="robot_state_publisher">
    <param name="publish_frequency" type="double" value="50.0" />
    <param name="tf_prefix" type="string" value="" />
  </node>

  <node pkg="stereo_image_proc" type="stereo_image_proc" name="stereo_image_proc" ns="stereo" output="screen">
    <param name="approximate_sync" value="true"/>
    <param name="queue_size" value="20"/>
    <remap from="left/image_raw" to="left_camera/image_raw"/>
    <remap from="left/camera_info" to="left_camera/camera_info"/>
    <remap from="right/image_raw" to="right_camera/image_raw"/>
    <remap from="right/camera_info" to="right_camera/camera_info"/>
  </node>

  <node pkg="image_view" type="stereo_view" name="stereo_viewer" output="screen">
    <param name="approximate_sync" value="true"/>
    <remap from="/stereo/left/image" to="/stereo/left_camera/image_raw"/>
    <remap from="/stereo/right/image" to="/stereo/right_camera/image_raw"/>
  </node>

</launch>
